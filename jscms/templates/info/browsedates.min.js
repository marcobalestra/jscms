(()=>{let ti={html:"index",editable:!0,repository:"browsedates",display:"Browse by date",service:!0,content:[{selector:"#aboveTopBar",content:!1},{selector:"#topBar",part:"header.json"},{selector:"#belowTopBar",content:!1},{selector:"#topNavbar",part:"navbar.json"},{selector:"#mainContainer",content:[{type:"blocks",editable:!0,blocks:[{type:"text",wrap:"<h3></h3>",prop:"title"},{type:"text",wrap:'<h6 class="jcAbstract"></h6>',prop:"abstract"},{type:"mixed",prop:"blocks"},{type:"navigatebydate",prop:"navtype"},{type:"mixed",prop:"blocks2"}]},{type:"part",content:"sharethis.json"}]}]};jc.render.block.navigatebydate=(b,d)=>{const ntype=d[b.prop]&&d[b.prop].pagetype?d[b.prop].pagetype:"blog",restrict=!(!d[b.prop]||!d[b.prop].year)&&String(d[b.prop].year),$div=$('<div class="jcDateNavigator" id="'+AS.generateId("datenavigator")+'"></div>');jc.render.queue(1);const nocontent=()=>{$div.html('<div class="alert alert-warning">'+AS.label("NoItemsFound")+" — <i>“"+ntype+"”</i>.</div>"),jc.render.queue(-1)};return jc.jdav.get("struct/"+ntype+"-bydate-index.json",l=>{if(restrict&&(l.byyear=l.byyear.filter(x=>x.key==restrict)),!(AS.test.obj(l)&&AS.test.arr(l.byyear)&&l.byyear.length))return nocontent();const $tgt=$('<div class="jcDateNavigate" id="'+AS.generateId("datenavigate")+'"></div>'),makelist=($b,cb)=>{$tgt.data("selector")!=$b.data("selector")&&($("button[data-ismonth]",$div).each((idx,b)=>{b.className="btn btn-secondary"}),$b.get(0).className="btn btn-danger",jc.jdav.get($b.data("src"),l=>{$tgt.html("");let $ul=$("<ul></ul>");AS.def.arr(l).filter(e=>AS.test.obj(e)).sort((a,b)=>jc.sql2date(b.date).getTime()-jc.sql2date(a.date).getTime()).forEach(e=>{let $li=$("<li></li>");$li.append(`<a class="" onclick="jc.page.open('${e.page||ntype}'${e.id?","+e.id:""})"><strong>${e.title}</strong></a>`),$li.append(`<small class="jcDate date ml-2"> ${(new Date).fromsql(e.date).toLocaleDateString(navigator.language,{weekday:"long",day:"numeric"})} </small>`),e.description&&e.description.length&&$li.append('<br /><span class="jcDesc">'+e.description+"</span>"),$ul.append($li)}),$tgt.append($ul),$tgt.data("selector",$b.data("selector")),$b.get(0).className="btn btn-primary",AS.test.func(cb)&&cb.call(window,l)}))},$tabs=$('<ul class="nav nav-tabs mt-4" role="tablist"></ul>'),$panes=$('<div class="tab-content"></div>');let tobelisted=!1;l.byyear.sort((a,b)=>parseInt(b.key)-parseInt(a.key)).forEach((y,yidx)=>{var yid=AS.generateId("tab"+y.key);let $tab=$(`<li class="nav-item${yidx?"":" ml-4"}"><a class="nav-link${yidx?"":" active"}" data-toggle="tab" href="#${yid}" role="tab" aria-controls="${yid}" aria-selected="${!yidx}">${y.key}</a></li>`),$yp=$(`<div class="tab-pane${yidx?"":" show active"}" id="${yid}" role="tabpanel" aria-labelledby="${y.key}"></div>`),$tb=$(`<div class="btn-toolbar" role="toolbar" aria-label="${y.key}"></div>`),$bg=$(`<div class="btn-group m-2" role="group" aria-label="${y.key}"></div>`);l.bymonth.filter(m=>0==m.key.indexOf(y.key+"-")).sort((a,b)=>parseInt(b.key.replace(/-/,""))-parseInt(a.key.replace(/-/,""))).forEach((m,midx)=>{var mname=jc.sql2date(m.key+"-01").toLocaleString(navigator.language,{month:"long"});let $b=$(`<button type="button" class="btn btn-secondary" data-ismonth="true" data-selector="${m.key}" data-src="${m.file}" title="${m.qt}">${mname}</button>`);$b.on("click",()=>{makelist($b)}),tobelisted=tobelisted||$b,midx||$tab.on("click",()=>{makelist($b)}),$bg.append($b)}),$tabs.append($tab),$panes.append($yp.append($tb.append($bg)))}),$div.append($tabs,$panes,$tgt),tobelisted?makelist(tobelisted,()=>{jc.render.queue(-1)}):jc.render.queue(-1)},()=>{nocontent()}),$div},jc.template.info.set("browsedates",ti)})();