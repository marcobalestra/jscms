(()=>{var data={form:callback=>{let fo={requires:["basic","pikaday","tinymce","iro","slider"],options:{},fields:[["type","hidden",{value:"fbcomments"}],["active","bool",{asLabel:"Active"}],["like","bool",{asLabel:"UseFbLike",depends:"active"}],["mod","select",{asLabel:"Moderator",options:[{value:"",label:AS.label("None")},{value:"U",label:"FB user"},{value:"A",label:"FB app/page/group"}]}],["fbid","text",{asLabel:"FacebookID",trim:!0,skipempty:!0,asHelp:"FacebookIdHelp",depends:"mod"}],["comments","bool",{asLabel:"UseFbComments",depends:"active,fbid"}],["numposts","slider",{asLabel:"Max",min:1,max:100,report:{value:!0},default:10,depends:"comments"}],["hide","freehtml",{value:AS.label("Hide")+":",depends:"comments"}]]};return jc.edit.prop.pageTypes.sort().forEach(s=>{fo.fields.push(["hide-"+s,"bool",{label:s,depends:"comments"}])}),AS.test.func(callback)&&callback.call(window,fo),fo},render:data=>{$(".jcFbcomments").remove();const $out=$('<div class="jcFbcomments"></div>');var nocomment=!data.comments||data["hide-"+jc.page.current()]||jc.page.data().pageContent.metadata&&jc.page.data().pageContent.metadata.hideComments;const head=document.documentElement.querySelector("head");if(nocomment&&!data.like)return $out.data("inactive",!0),"parts"==jc.page.prop.editMode?$out.append('<span class="jcPlaceHolder">Facebook comments â€” Inactive</span>'):$out.css("display","none"),$out;if($out.css({"max-width":"600px",margin:"10px 0 10px auto"}),data.language||(data.language=navigator.language),data.language){let p=data.language.replace(/-/,"_").split("_");p[1]||(p[1]=p[0]),data.language=p[0].toLowerCase()+"_"+p[1].toUpperCase()}return AS.test.num(data.numposts)||(data.numposts=10),window.FB&&window.FB.XFBML||$out.append(`<div id="fb-root"></div><script async defer crossorigin="anonymous" src="https://connect.facebook.net/${data.language}/sdk.js#xfbml=1&version=v10.0"></script>`),data.like&&$out.append(`<div class="fb-like" data-href="${location.href.replace(/^[^:]+:../,"")}" data-width="550" data-layout="standard" data-action="like" data-size="small" data-share="true"></div>`),nocomment||($out.append(`<div class="fb-comments" data-href="${location.href.replace(/^[^:]+:../,"")}" data-width="550" data-numposts="${data.numposts}"></div>`),$('meta[property="fb:admins"],meta[property="fb:app_id"]',head).remove(),$(head).append(`<meta property="fb:${"A"==data.mod?"app_id":"admins"}" content="${data.fbid}"/>`)),$(document.body).data("jcFbcommentsEvent")||$(document.body).on("jc_render_end",()=>{$out.data("inactive")||($('meta[property^="og:"]',head).remove(),$(head).append(`<meta property="og:url" content="${location.href.replace(/^[^:]+:../,"")}" />`,'<meta property="og:type" content="website" />',`<meta property="og:title" content="${$("title",head).html()}" />`,`<meta property="og:description" content="${$('meta[name="description"]',head).attr("content")}" />`),$('[class*="fb-"][data-href]',$out).attr("data-href",location.href.replace(/^[^:]+:../,"")),$("[data-width][href]",$out).attr("href",location.href.replace(/^[^:]+:../,"")),window.FB&&window.FB.XFBML&&$(()=>{FB.XFBML.parse()}))}).data("jcFbcommentsEvent",!0),$out}};jc.template.repo.set("part-fbcomments",data)})();